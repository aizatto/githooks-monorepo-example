#!/bin/sh
set -e

githookspath="$(dirname "$0")"
. "$githookspath/fn.sh"


if [ ! -d "$githookspath/pre-commit-hooks" ]; then
  debug "Directory does not exist: $githookspath/pre-commit-hooks"
	exit 0
fi

cd $githookspath

ran=false

for file in ./pre-commit-hooks/*
do
  project=$(basename "$file")

  set +e
	debug "checking $project"
  changed $project
	exitCode="$?"
  set -e

  # "1" represents no files found
  # meaning no files have been changed, so it is safe to continue
	if [ $exitCode = 1 ]; then
		continue
	fi
  ran=true

  sh -e "$file" "$@"
done

if [ "$ran" = false ]; then
  debug "No pre-commit hooks executed"
fi
